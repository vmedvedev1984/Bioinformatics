venv setup
  

pip install fastapi
pip install "uvicorn[standard]"

main.py

from fastapi import FastAPI, Response
from fastapi.responses import HTMLResponse, JSONResponse, PlainTextResponse, FileResponse, RedirectResponse
from fastapi.encoders import jsonable_encoder
from fastapi.staticfiles import StaticFiles

app = FastAPI()

app.mount("/static", StaticFiles(directory="public", html=True))

@app.get("/")
def root():
    return FileResponse("public/index2.html")
 
@app.post("/hello")
def hello(data = Body()):
    name = data["name"]
    age = data["age"]
    return {"message": f"{name}, ваш возраст - {age}"}

'''
@app.post("/hello")
def hello(name:str  = Body(embed=True, min_length=3, max_length=20), 
            age: int = Body(embed=True, ge=18, lt=111)):
    return {"message": f"{name}, ваш возраст - {age}"}
'''

@app.get("/")
def read_root():
    html_content = "<h2>Hello METANIT.COM!</h2>"
    return HTMLResponse(content=html_content)

@app.get("/about")
def about():
    return {"message": "О сайте"}

@app.get("/jsonfy")
def root():
    data = {"message": "This message will be JSONed"}
    json_data = jsonable_encoder(data)
    return JSONResponse(content=json_data)

@app.get("/resp")
def root():
    data = "Response page"
    return Response(content=data, media_type="text/plain")

@app.get("/")
def root():
    data = "PlainText response page"
    return PlainTextResponse(content=data)

@app.get("/users/{id}")
def users(id: int):
    return {"user_id": id}

@app.get("/users/{name}/{age}")
def users(name:str=Path(min_length=3, max_length=20), age:int=Path(ge=18, lt=111)):
    return {"user_name": name, "user_age": age}

@app.get("/notfound", status_code=404)
def notfound():
    return  {"message": "Resource Not Found"}

@app.get("/old")
def old():
    return RedirectResponse("/new")
 
@app.get("/new")
def new():
    return PlainTextResponse("Новая страница")


/* Для отправки файлов из приложения FastAPI применяется класс FileResponse - наследник класса Response. */

@app.get("/")
def root():
    return FileResponse("public/index.html")
 
# альтернативный вариант
@app.get("/file", response_class = FileResponse)
def root_html():
    return "public/index.html"



"""
@app.get("/text", response_class = PlainTextResponse)
def root_text():
    return "Hello METANIT.COM"
 
@app.get("/html", response_class = HTMLResponse)
def root_html():
    return "<h2>Hello METANIT.COM</h2>"
"""

uvicorn main:app --reload

get()
post()
put()
delete()
options()
head()
patch()
trace()

